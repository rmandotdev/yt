---
import Layout from "~/layouts/Layout.astro";

const title = null;
const description = null;
const canonical = null;
---

<Layout {title} {description} {canonical}>
  <div class="flex justify-center items-center h-screen [background:#f9f9f9]">
    <form
      id="yt-form"
      class="flex flex-col items-center [background:#fff] shadow-[0_4px_16px_rgba(0,0,0,0.08)] px-6 py-8 rounded-xl"
    >
      <input
        id="yt-url"
        type="text"
        placeholder="Enter YouTube video URL"
        required
        class="w-80 border text-base box-border [outline:none] transition-[border-color] duration-[0.2s] mb-[18px] px-4 py-3 rounded-md border-solid border-[#ccc]"
        onfocus="this.style.borderColor='#ff0000'"
        onblur="this.style.borderColor='#ccc'"
      />
      <button
        type="submit"
        class="[background:#ff0000] text-white text-base cursor-pointer transition-[background] duration-[0.2s] px-7 py-2.5 rounded-md border-[none]"
      >
        Go
      </button>
    </form>
  </div>

  <script>
    const form = document.getElementById("yt-form") as HTMLFormElement;
    const input = document.getElementById("yt-url") as HTMLInputElement;

    form.addEventListener("submit", function (event) {
      event.preventDefault();
      const url = input.value;
      try {
        const urlObj = new URL(url);
        const videoId = urlObj.searchParams.get("v");
        if (videoId && videoId.length === 11) {
          window.location.href = `/v/${videoId}`;
        } else {
          alert("Invalid YouTube URL");
        }
      } catch {
        alert("Invalid YouTube URL");
      }
    });
  </script>
</Layout>
